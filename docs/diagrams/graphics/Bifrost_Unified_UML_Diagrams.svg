<svg width="1400" height="1000" viewBox="0 0 1400 1000" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect width="1400" height="1000" fill="#1E1E1E" />
  
  <!-- Title -->
  <text x="700" y="50" font-family="Arial" font-size="28" fill="#FFFFFF" text-anchor="middle" font-weight="bold">BIFROST SYSTEM: UNIFIED USER FLOW & ARCHITECTURE</text>

  <!-- --- 1. USE CASE DIAGRAM (Modelado de Actores Completo) --- -->
  <g id="use-case-diagram" transform="translate(50, 100)">
    <rect x="0" y="0" width="450" height="400" rx="10" fill="#2D2D2D" stroke="#4D96FF" stroke-width="2" />
    <text x="225" y="30" font-family="Arial" font-size="18" fill="#4D96FF" text-anchor="middle" font-weight="bold">USE CASES (Roles & Metas)</text>
    
    <!-- Actor: Alumno -->
    <g transform="translate(40, 60)">
      <circle cx="15" cy="0" r="15" fill="#FFFFFF" stroke="#CCCCCC" stroke-width="2" />
      <line x1="15" y1="15" x2="15" y2="40" stroke="#CCCCCC" stroke-width="2" />
      <line x1="0" y1="25" x2="30" y2="25" stroke="#CCCCCC" stroke-width="2" />
      <line x1="15" y1="40" x2="0" y2="60" stroke="#CCCCCC" stroke-width="2" />
      <line x1="15" y1="40" x2="30" y2="60" stroke="#CCCCCC" stroke-width="2" />
      <text x="15" y="80" font-family="Arial" font-size="12" fill="#FFFFFF" text-anchor="middle">Alumno</text>
    </g>

    <!-- Actor: Docente -->
    <g transform="translate(40, 200)">
      <circle cx="15" cy="0" r="15" fill="#FFFFFF" stroke="#CCCCCC" stroke-width="2" />
      <line x1="15" y1="15" x2="15" y2="40" stroke="#CCCCCC" stroke-width="2" />
      <line x1="0" y1="25" x2="30" y2="25" stroke="#CCCCCC" stroke-width="2" />
      <line x1="15" y1="40" x2="0" y2="60" stroke="#CCCCCC" stroke-width="2" />
      <line x1="15" y1="40" x2="30" y2="60" stroke="#CCCCCC" stroke-width="2" />
      <text x="15" y="80" font-family="Arial" font-size="12" fill="#FFFFFF" text-anchor="middle">Docente</text>
    </g>

    <!-- Use Cases -->
    <g transform="translate(150, 50)">
        <ellipse cx="120" cy="20" rx="100" ry="20" fill="#3D3D3D" stroke="#4D96FF" stroke-width="2" />
        <text x="120" y="25" font-family="Arial" font-size="12" fill="#FFFFFF" text-anchor="middle">Crear Proyecto</text>
        
        <ellipse cx="120" cy="70" rx="100" ry="20" fill="#3D3D3D" stroke="#4D96FF" stroke-width="2" />
        <text x="120" y="75" font-family="Arial" font-size="12" fill="#FFFFFF" text-anchor="middle">Invitar Squad</text>
        
        <ellipse cx="120" cy="120" rx="100" ry="20" fill="#3D3D3D" stroke="#4D96FF" stroke-width="2" />
        <text x="120" y="125" font-family="Arial" font-size="12" fill="#FFFFFF" text-anchor="middle">Subir Evidencias</text>
        
        <ellipse cx="120" cy="190" rx="100" ry="20" fill="#3D3D3D" stroke="#4D96FF" stroke-width="2" />
        <text x="120" y="195" font-family="Arial" font-size="12" fill="#FFFFFF" text-anchor="middle">Validar Propuesta</text>
        
        <ellipse cx="120" cy="240" rx="100" ry="20" fill="#3D3D3D" stroke="#4D96FF" stroke-width="2" />
        <text x="120" y="245" font-family="Arial" font-size="12" fill="#FFFFFF" text-anchor="middle">Evaluar (Rubrica)</text>

         <ellipse cx="120" cy="310" rx="100" ry="20" fill="#3D3D3D" stroke="#4D96FF" stroke-width="2" />
        <text x="120" y="315" font-family="Arial" font-size="12" fill="#FFFFFF" text-anchor="middle">Consultar Ranking</text>
    </g>

    <!-- Connections -->
    <line x1="70" y1="60" x2="170" y2="70" stroke="#CCCCCC" stroke-width="1" /> <!-- Alumno -> Crear -->
    <line x1="70" y1="70" x2="170" y2="120" stroke="#CCCCCC" stroke-width="1" /> <!-- Alumno -> Invitar -->
    <line x1="70" y1="90" x2="170" y2="170" stroke="#CCCCCC" stroke-width="1" /> <!-- Alumno -> Subir -->
    <line x1="70" y1="120" x2="190" y2="350" stroke="#CCCCCC" stroke-width="1" /> <!-- Alumno -> Ranking -->
    
    <line x1="70" y1="210" x2="170" y2="240" stroke="#CCCCCC" stroke-width="1" /> <!-- Docente -> Validar -->
    <line x1="70" y1="230" x2="170" y2="290" stroke="#CCCCCC" stroke-width="1" /> <!-- Docente -> Evaluar -->

  </g>

  <!-- --- 2. ACTIVITY DIAGRAM (Flujo de Publicación de Proyecto) --- -->
  <g id="activity-diagram" transform="translate(550, 100)">
    <rect x="0" y="0" width="400" height="400" rx="10" fill="#2D2D2D" stroke="#2ECC71" stroke-width="2" />
    <text x="200" y="30" font-family="Arial" font-size="18" fill="#2ECC71" text-anchor="middle" font-weight="bold">ACTIVITY (Flujo de Publicación)</text>
    
    <!-- Start -->
    <circle cx="200" cy="50" r="10" fill="#2ECC71" />
    
    <!-- Actions -->
    <rect x="125" y="80" width="150" height="30" rx="5" fill="#3D3D3D" stroke="#2ECC71" stroke-width="1" />
    <text x="200" y="100" font-family="Arial" font-size="12" fill="#FFFFFF" text-anchor="middle">Registrar Proyecto</text>
    
    <!-- Fork Bar -->
    <rect x="50" y="130" width="300" height="4" fill="#FFFFFF" />
    
    <!-- Parallel Tasks -->
    <rect x="30" y="150" width="100" height="30" rx="5" fill="#3D3D3D" stroke="#2ECC71" stroke-width="1" />
    <text x="80" y="170" font-family="Arial" font-size="10" fill="#FFFFFF" text-anchor="middle">Invitar Squad</text>
    
    <rect x="150" y="150" width="100" height="30" rx="5" fill="#3D3D3D" stroke="#2ECC71" stroke-width="1" />
    <text x="200" y="170" font-family="Arial" font-size="10" fill="#FFFFFF" text-anchor="middle">Subir Video</text>
    
    <rect x="270" y="150" width="100" height="30" rx="5" fill="#3D3D3D" stroke="#2ECC71" stroke-width="1" />
    <text x="320" y="170" font-family="Arial" font-size="10" fill="#FFFFFF" text-anchor="middle">Docs PDF</text>
    
    <!-- Join Bar -->
    <rect x="50" y="200" width="300" height="4" fill="#FFFFFF" />
    
    <rect x="125" y="220" width="150" height="30" rx="5" fill="#3D3D3D" stroke="#2ECC71" stroke-width="1" />
    <text x="200" y="240" font-family="Arial" font-size="12" fill="#FFFFFF" text-anchor="middle">Solicitar Validación</text>
    
    <!-- Decision -->
    <polygon points="200,270 230,295 200,320 170,295" fill="#3D3D3D" stroke="#2ECC71" stroke-width="1" />
    <text x="250" y="300" font-family="Arial" font-size="10" fill="#FFFFFF">¿Valido?</text>

    <!-- Outcomes -->
    <rect x="60" y="340" width="100" height="30" rx="5" fill="#E74C3C" stroke="#FFFFFF" stroke-width="1" />
    <text x="110" y="360" font-family="Arial" font-size="10" fill="#FFFFFF" text-anchor="middle">Corregir</text>
    
    <rect x="240" y="340" width="100" height="30" rx="5" fill="#2ECC71" stroke="#FFFFFF" stroke-width="1" />
    <text x="290" y="360" font-family="Arial" font-size="10" fill="#FFFFFF" text-anchor="middle">Publicado</text>

    <!-- Flows -->
    <line x1="200" y1="60" x2="200" y2="80" stroke="#FFFFFF" stroke-width="1" marker-end="url(#arrow)" />
    <line x1="200" y1="110" x2="200" y2="130" stroke="#FFFFFF" stroke-width="1" />
    
    <line x1="80" y1="134" x2="80" y2="150" stroke="#FFFFFF" stroke-width="1" marker-end="url(#arrow)" />
    <line x1="200" y1="134" x2="200" y2="150" stroke="#FFFFFF" stroke-width="1" marker-end="url(#arrow)" />
    <line x1="320" y1="134" x2="320" y2="150" stroke="#FFFFFF" stroke-width="1" marker-end="url(#arrow)" />

    <line x1="80" y1="180" x2="80" y2="200" stroke="#FFFFFF" stroke-width="1" />
    <line x1="200" y1="180" x2="200" y2="200" stroke="#FFFFFF" stroke-width="1" />
    <line x1="320" y1="180" x2="320" y2="200" stroke="#FFFFFF" stroke-width="1" />
    
    <line x1="200" y1="204" x2="200" y2="220" stroke="#FFFFFF" stroke-width="1" marker-end="url(#arrow)" />
    <line x1="200" y1="250" x2="200" y2="270" stroke="#FFFFFF" stroke-width="1" marker-end="url(#arrow)" />
    
    <line x1="170" y1="295" x2="110" y2="295" stroke="#FFFFFF" stroke-width="1" />
    <line x1="110" y1="295" x2="110" y2="340" stroke="#FFFFFF" stroke-width="1" marker-end="url(#arrow)" />
    
    <line x1="230" y1="295" x2="290" y2="295" stroke="#FFFFFF" stroke-width="1" />
    <line x1="290" y1="295" x2="290" y2="340" stroke="#FFFFFF" stroke-width="1" marker-end="url(#arrow)" />
  </g>

  <!-- --- 3. STATE DIAGRAM (Ciclo de Vida Extendido) --- -->
  <g id="state-diagram" transform="translate(1000, 100)">
    <rect x="0" y="0" width="350" height="400" rx="10" fill="#2D2D2D" stroke="#F1C40F" stroke-width="2" />
    <text x="175" y="30" font-family="Arial" font-size="18" fill="#F1C40F" text-anchor="middle" font-weight="bold">STATE (Ciclo de Vida)</text>

    <!-- State: Borrador -->
    <rect x="100" y="60" width="150" height="40" rx="10" fill="#3D3D3D" stroke="#F1C40F" stroke-width="1" />
    <text x="175" y="85" font-family="Arial" font-size="12" fill="#FFFFFF" text-anchor="middle">Borrador</text>

    <!-- State: En Revision -->
    <rect x="100" y="140" width="150" height="40" rx="10" fill="#3D3D3D" stroke="#E67E22" stroke-width="1" />
    <text x="175" y="165" font-family="Arial" font-size="12" fill="#FFFFFF" text-anchor="middle">En Revisión</text>

    <!-- State: Activo -->
    <rect x="100" y="220" width="150" height="40" rx="10" fill="#3D3D3D" stroke="#2ECC71" stroke-width="1" />
    <text x="175" y="245" font-family="Arial" font-size="12" fill="#FFFFFF" text-anchor="middle">Activo / Evaluando</text>

     <!-- State: Destacado -->
    <rect x="100" y="320" width="150" height="40" rx="10" fill="#3D3D3D" stroke="#9B59B6" stroke-width="1" />
    <text x="175" y="345" font-family="Arial" font-size="12" fill="#FFFFFF" text-anchor="middle">Público / Destacado</text>

    <!-- Transitions -->
    <line x1="175" y1="100" x2="175" y2="140" stroke="#FFFFFF" stroke-width="1" marker-end="url(#arrow)" />
    <text x="185" y="125" font-family="Arial" font-size="10" fill="#AAAAAA" text-anchor="start">Enviar Doc.</text>

    <line x1="175" y1="180" x2="175" y2="220" stroke="#FFFFFF" stroke-width="1" marker-end="url(#arrow)" />
    <text x="185" y="205" font-family="Arial" font-size="10" fill="#AAAAAA" text-anchor="start">Aprobado</text>
    
    <path d="M 120 180 Q 80 160 120 100" stroke="#E74C3C" stroke-width="1" fill="none" marker-end="url(#arrow)" />
    <text x="60" y="150" font-family="Arial" font-size="10" fill="#E74C3C" text-anchor="end">Rechazado</text>

    <line x1="175" y1="260" x2="175" y2="320" stroke="#FFFFFF" stroke-width="1" marker-end="url(#arrow)" />
    <text x="185" y="295" font-family="Arial" font-size="10" fill="#AAAAAA" text-anchor="start">Score > 80</text>
  </g>

  <!-- --- 4. SEQUENCE DIAGRAM (CQRS Evaluation Flow) --- -->
  <g id="sequence-diagram" transform="translate(50, 550)">
    <rect x="0" y="0" width="1300" height="400" rx="10" fill="#2D2D2D" stroke="#E74C3C" stroke-width="2" />
    <text x="650" y="30" font-family="Arial" font-size="18" fill="#E74C3C" text-anchor="middle" font-weight="bold">SEQUENCE (CQRS: Flujo de Evaluación de Proyecto)</text>

    <!-- Lifelines -->
    <g transform="translate(100, 50)">
      <rect x="-50" y="0" width="100" height="30" fill="#3D3D3D" stroke="#E74C3C" stroke-width="1" />
      <text x="0" y="20" font-family="Arial" font-size="12" fill="#FFFFFF" text-anchor="middle">Docente App</text>
      <line x1="0" y1="30" x2="0" y2="350" stroke="#555555" stroke-dasharray="5,5" />
    </g>

    <g transform="translate(400, 50)">
      <rect x="-50" y="0" width="100" height="30" fill="#3D3D3D" stroke="#E74C3C" stroke-width="1" />
      <text x="0" y="20" font-family="Arial" font-size="12" fill="#FFFFFF" text-anchor="middle">Bifrost API</text>
      <line x1="0" y1="30" x2="0" y2="350" stroke="#555555" stroke-dasharray="5,5" />
      <rect x="-5" y="90" width="10" height="200" fill="#E74C3C" />
    </g>

    <g transform="translate(700, 50)">
      <rect x="-50" y="0" width="100" height="30" fill="#3D3D3D" stroke="#E74C3C" stroke-width="1" />
      <text x="0" y="20" font-family="Arial" font-size="12" fill="#FFFFFF" text-anchor="middle">Event Store</text>
      <line x1="0" y1="30" x2="0" y2="350" stroke="#555555" stroke-dasharray="5,5" />
    </g>
    
    <g transform="translate(1000, 50)">
      <rect x="-50" y="0" width="100" height="30" fill="#3D3D3D" stroke="#E74C3C" stroke-width="1" />
      <text x="0" y="20" font-family="Arial" font-size="12" fill="#FFFFFF" text-anchor="middle">Projections</text>
      <line x1="0" y1="30" x2="0" y2="350" stroke="#555555" stroke-dasharray="5,5" />
    </g>

    <!-- Messages -->
    <line x1="100" y1="100" x2="390" y2="100" stroke="#FFFFFF" stroke-width="2" marker-end="url(#arrow)" />
    <text x="250" y="90" font-family="Arial" font-size="12" fill="#FFFFFF" text-anchor="middle">1. POST /evaluar (Score: 95)</text>

    <line x1="405" y1="130" x2="690" y2="130" stroke="#FFFFFF" stroke-width="2" marker-end="url(#arrow)" />
    <text x="550" y="120" font-family="Arial" font-size="12" fill="#FFFFFF" text-anchor="middle">2. Append(EventoEvaluado)</text>
    
    <line x1="690" y1="160" x2="405" y2="160" stroke="#FFFFFF" stroke-width="1" stroke-dasharray="5,5" marker-end="url(#arrow)" />
    <text x="550" y="150" font-family="Arial" font-size="12" fill="#AAAAAA" text-anchor="middle">3. ACK</text>

    <line x1="395" y1="190" x2="100" y2="190" stroke="#FFFFFF" stroke-width="1" stroke-dasharray="5,5" marker-end="url(#arrow)" />
    <text x="250" y="180" font-family="Arial" font-size="12" fill="#AAAAAA" text-anchor="middle">4. 202 Accepted</text>
    
    <!-- Async Flow -->
    <rect x="680" y="220" width="600" height="100" fill="#222222" rx="5" opacity="0.3" stroke="#CCCCCC" />
    <text x="700" y="240" font-family="Arial" font-size="12" fill="#AAAAAA" font-style="italic">Async Processing</text>
    
    <line x1="700" y1="260" x2="990" y2="260" stroke="#FFFFFF" stroke-width="2" marker-end="url(#arrow)" />
    <text x="850" y="250" font-family="Arial" font-size="12" fill="#E74C3C" text-anchor="middle">5. ChangeStream Trigger</text>
    
    <line x1="1000" y1="290" x2="1250" y2="290" stroke="#FFFFFF" stroke-width="2" marker-end="url(#arrow)" />
    <text x="1125" y="280" font-family="Arial" font-size="12" fill="#E74C3C" text-anchor="middle">6. Update ReadDB</text>
    
  </g>

  <!-- Definitions -->
  <defs>
    <marker id="arrow" markerWidth="10" markerHeight="10" refX="9" refY="3" orient="auto" markerUnits="strokeWidth">
      <path d="M0,0 L0,6 L9,3 z" fill="#FFFFFF" />
    </marker>
  </defs>

</svg>
